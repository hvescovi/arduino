#define LED1 5
#define LED2 4
#define LED3 3
#define BOTAO 10

void setup()
{
  pinMode(LED1, INPUT);
  pinMode(LED2, INPUT);
  pinMode(LED3, INPUT);
  pinMode(BOTAO, OUTPUT);
  Serial.begin(9600);  
}

int x;
bool piscando = true; // leds piscando/
bool apertou = false; // apertou botão?
int led_atual = 1; // qual led está piscando?

void liga_desliga(int led1, int led2, int led3) {
  digitalWrite(LED1, led1);
  digitalWrite(LED2, led2);
  digitalWrite(LED3, led3);
}
void acende_leds(int led_piscando){
  if (led_piscando == 1) liga_desliga(HIGH, LOW, LOW);
  if (led_piscando == 2) liga_desliga(LOW, HIGH, LOW);
  if (led_piscando == 3) liga_desliga(LOW, LOW, HIGH);    
}

void loop()
{
  // PARTE 1
  // FAZ A LEITURA DO BOTÃO
  x = digitalRead(BOTAO);
  Serial.print(x);
  Serial.println(", ");
  
  // PARTE 2
  // VERIFICA INFORMAÇÕES DE CONTROLE DO BOTÃO
  
  // o botão foi apertado?
  if (x == 1) {
    // sinaliza que apertou
    apertou = true;
  } else {
    // o botão está solto
    // mas ele havia sido apertado antes?
    if (apertou) {
      // então agora o botão foi LIBERADO
      // para de piscar
      piscando = not piscando;
      // sinaliza que agora o botão foi solto
      apertou = false;
    }
  }
  
  // PARTE 3
  // VERIFICA leds
  
  // o led está piscando?
  if (piscando == 1) {
    // ajusta os leds
    acende_leds(led_atual);
  }
  delay(1000);
  // incrementa led atual
  led_atual = led_atual + 1;
  if (led_atual >= 4) { //passou do limite?
    // volta para o primeiro
    led_atual = 1;
  }
  
}
