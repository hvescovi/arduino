void setup()
{
  pinMode(5, INPUT);
  pinMode(13, OUTPUT);
  Serial.begin(9600);  
}

int x;
// variável para controlar o estado da piscagem
// inicialmente, o led não pisca
bool piscando = true;

// variável para sinalizar se apertou o botão ou não
// inicialmente o botão não está apertado
bool apertou = false;

void loop()
{
  // PARTE 1
  // FAZ A LEITURA DO BOTÃO
  x = digitalRead(5);
  Serial.print(x);
  Serial.println(", ");
  
  // PARTE 2
  // VERIFICA INFORMAÇÕES DE CONTROLE DO BOTÃO
  
  // o botão foi apertado?
  if (x == 1) {
    // é a primeira vez que faz a leitura do botão apertado?
    if (apertou == false) {
      // inverte a piscagem
      piscando = not piscando;
      // sinaliza que o botão já foi apertado
      // na sequência, agora é só esperar o botão liberar
      // ou seja, quando continuar apertado, 
      // não precis fazer mais nada, pois o que precisava ser
      // feito quando o botão foi apertado já foi feito,
      // e eu quero fazer apenas uma vez :-)
      apertou = true;
    }
  } else {
    // se entrou aqui, é porque o botão não está apertado
    // (x == 0)
    
    // mas...
    // o botão estava apertado antes?
    // está vindo de uma transição de 
    // "botão apertado" para "botão solto"?
    if (apertou) {
      // então agora o botão foi SOLTO :-)
      // ajusta a variável interna de controle
      // para refletir essa nova situação
      apertou = false;
    }
  }
  
  // PARTE 3
  // VERIFICA SE PRECISA ALTERAR PISCAGEM DO LED
  
  // o led está piscando?
  if (piscando == 1) {
    // acende o led :-)
    digitalWrite(13, HIGH);
  }
  // espera um pouco para ver o led aceso
  delay(300);
  // o led está piscando?
  if (piscando == 1) {
    // apaga o led
    digitalWrite(13, LOW);
  }    
  // espera um pouco para o led ficar apagado
  delay(300);
  
}
