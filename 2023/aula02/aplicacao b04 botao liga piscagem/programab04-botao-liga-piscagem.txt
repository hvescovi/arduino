void setup()
{
  pinMode(5, INPUT);
  pinMode(13, OUTPUT);
  Serial.begin(9600);  
}

int x;
// variável para controlar o estado da piscagem
// inicialmente, o led não pisca
bool piscando = false;

// variável para sinalizar se apertou botão ou não
// inicialmente o botão não está apertado
bool apertou = false;

void loop()
{
  // PARTE 1
  // FAZ A LEITURA DO BOTÃO
  x = digitalRead(5);
  Serial.print(x);
  Serial.println(", ");
  
  // PARTE 2
  // VERIFICA INFORMAÇÕES DE CONTROLE DO BOTÃO
  
  // o botão foi apertado?
  if (x == 1) {
    // sinaliza que apertou
    apertou = true;
  } else {
    // o botão está solto
    // mas ele havia sido apertado antes?
    if (apertou) {
      // então agora o botão foi LIBERADO
      // inverte a piscagem
      piscando = not piscando;
      // sinaliza que agora o botão foi solto
      apertou = false;
    }
  }
  
  // PARTE 3
  // VERIFICA SE PRECISA ALTERAR PISCAGEM DO LED
  
  // o led está piscando?
  if (piscando == 1) {
    // acende o led :-)
    digitalWrite(13, HIGH);
  }
  delay(300);
  // o led deveria estar piscando?
  if (piscando == 1) {
    // apaga o led
    digitalWrite(13, LOW);
  }    
  delay(300);
  
}
